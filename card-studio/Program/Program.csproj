<Project Sdk="Microsoft.NET.Sdk">

	<PropertyGroup>
		<OutputType>WinExe</OutputType>
		<TargetFramework>net7.0-windows</TargetFramework>
		<Nullable>enable</Nullable>
		<UseWPF>true</UseWPF>
		<AssemblyName>$(SolutionName).$(MSBuildProjectName)</AssemblyName>
		<RootNamespace>$(SolutionName).$(MSBuildProjectName)</RootNamespace>
	</PropertyGroup>

	<ItemGroup>
		<Page Remove="Application.xaml" />
	</ItemGroup>

	<ItemGroup>
		<Compile Update="Resources\Default.Designer.cs">
			<DesignTime>True</DesignTime>
			<AutoGen>True</AutoGen>
			<DependentUpon>Default.resx</DependentUpon>
		</Compile>
	</ItemGroup>

	<ItemGroup>
		<EmbeddedResource Update="Resources\Default.resx">
			<Generator>PublicResXFileCodeGenerator</Generator>
			<LastGenOutput>Default.Designer.cs</LastGenOutput>
		</EmbeddedResource>
	</ItemGroup>

	<ItemGroup>
		<Folder Include="PreBuildOutput\" />
	</ItemGroup>

	<!-- pre-build setup -->
	<PropertyGroup>
		<ProjectPreBuildOutputDir>"$(SolutionDir)$(MSBuildProjectName)\$(PreBuildOutputDir)\"</ProjectPreBuildOutputDir>
		<ProjectVersionClassFile>"$(ProjectPreBuildOutputDir)ProjectVersion.cs"</ProjectVersionClassFile>
	</PropertyGroup>

	<!-- pre-build items -->
	<Target Name="PreBuild" BeforeTargets="PreBuildEvent">
		<Exec Command="if not exist $(ProjectPreBuildOutputDir) mkdir $(ProjectPreBuildOutputDir)" />
		<Exec Command="@echo $(AutoGeneratedFileNotice)&gt; $(ProjectVersionClassFile)" />
		<Exec Command="@echo.&gt;&gt; $(ProjectVersionClassFile)" />
		<Exec Command="@echo.&gt;&gt; $(ProjectVersionClassFile)" />
		<Exec Command="@echo namespace $(RootNamespace)&gt;&gt; $(ProjectVersionClassFile)" />
		<Exec Command="@echo {&gt;&gt; $(ProjectVersionClassFile)" />
		<Exec Command="@echo 	public static class ProjectVersion&gt;&gt; $(ProjectVersionClassFile)" />
		<Exec Command="@echo 	{&gt;&gt; $(ProjectVersionClassFile)" />
		<Exec Command="@echo 		public const string CurrentVersion = &quot;$(ProjectVersion)&quot;;&gt;&gt; $(ProjectVersionClassFile)" />
		<Exec Command="@echo 	}&gt;&gt; $(ProjectVersionClassFile)" />
		<Exec Command="@echo }&gt;&gt; $(ProjectVersionClassFile)" />
	</Target>

</Project>
